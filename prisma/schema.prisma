generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Calificaciones {
  id_calificacion Int      @id @default(autoincrement()) @map("id_calificacion")
  calificacion    Float    @map("calificacion")
  dt_registro     DateTime @map("dt_registro")
  fk_inscripcion  Int      @map("fk_inscripcion")
  fk_corte        Int      @map("fk_corte")

  // Relaciones
  relInscripcion  Rel_Inscripciones @relation(fields: [fk_inscripcion], references: [id_inscripcion], name: "calificaciones_relInscripcion")
  corte           Cortes            @relation(fields: [fk_corte], references: [id_corte], name: "calificaciones_corte")

  @@map("calificaciones")
}

model Cortes {
  id_corte      Int       @id @map("id_corte")
  nm_corte      String?   @map("nm_corte")
  numero_corte  Int       @map("numero_corte")
  porcentaje    Int       @map("porcentaje")
  fk_curso      Int       @map("fk_curso")

  // Relaciones
  curso         Cursos      @relation(fields: [fk_curso], references: [id_curso], name: "cortes_curso")
  calificaciones Calificaciones[] @relation(name: "calificaciones_corte")

  @@map("cortes")
}

model Cursos {
  id_curso          Int       @id @map("id_curso")
  nm_curso          String    @map("nm_curso")
  periodo_academico Int       @map("periodo_academico")

  // Relaciones
  cortes           Cortes[]          @relation(name: "cortes_curso")
  relInscripciones Rel_Inscripciones[] @relation(name: "relInscripciones_curso")

  @@map("cursos")
}

model Estudiantes {
  id_estudiante      Int     @id @map("id_estudiante")
  nombre             String  @map("nombre")
  apellido           String  @map("apellido")
  correo             String  @map("correo")
  codigo_estudiantil String  @unique @map("codigo_estudiantil")

  // Relaciones
  relInscripciones Rel_Inscripciones[] @relation(name: "relInscripciones_estudiante")

  @@map("estudiantes")
}

model Rel_Inscripciones {
  id_inscripcion Int @id @default(autoincrement()) @map("id_inscripcion")
  fk_estudiante  Int @map("fk_estudiante")
  fk_curso       Int @map("fk_curso")

  // Relaciones
  estudiante     Estudiantes @relation(fields: [fk_estudiante], references: [id_estudiante], name: "relInscripciones_estudiante")
  curso          Cursos      @relation(fields: [fk_curso], references: [id_curso], name: "relInscripciones_curso")
  calificaciones Calificaciones[] @relation(name: "calificaciones_relInscripcion")

  @@map("rel_inscripciones")
}
